import telebot 
from config import token
from telebot import types
from logic import Pokemon


bot = telebot.TeleBot(token) 

@bot.message_handler(commands=['eat'])
def eate(message):
    markup = types.InlineKeyboardMarkup(row_width=2)
    
    btn_orange = types.InlineKeyboardButton("üçä –ê–ø–µ–ª—å—Å–∏–Ω", callback_data="orange")
    btn_apple = types.InlineKeyboardButton("üçé –Ø–±–ª–æ–∫–æ", callback_data='apple')
    btn_banana = types.InlineKeyboardButton("üçå –ë–∞–Ω–∞–Ω", callback_data="banana")

    markup.add(btn_orange, btn_apple, btn_banana)
    bot.reply_to(message, "ü§§ –ù–∞ –≤—ã–±–æ—Ä –µ—Å—Ç—å —Ç—Ä–∏ —Ñ—Ä—É–∫—Ç–∞: –ê–ø–µ–ª—å—Å–∏–Ω, –Ø–±–ª–æ–∫–æ, –ë–∞–Ω–∞–Ω \n\n‚ùì –ß—Ç–æ –≤—ã–±–µ—Ä–µ—à—å –¥–ª—è –∫–æ—Ä–º–ª–µ–Ω–∏—è?", reply_markup=markup)

@bot.callback_query_handler(func=lambda call: True)
def callback_handler(call):
    global botnumber, bal, playernumber
    user_id = call.from_user.id

    if call.data == "orange":
        bot.answer_callback_query(call.id)
        bot.send_message(call.message.chat.id, f"üçä –í—ã –ø–æ–∫–æ—Ä–º–∏–ª–∏ –≤–∞—à–µ–≥–æ –ø–æ–∫–µ–º–æ–Ω–∞ –∞–ø–µ–ª—å—Å–∏–Ω–æ–º!")

    elif call.data == "apple":
        bot.answer_callback_query(call.id)
        bot.send_message(call.message.chat.id, f"üçé –í—ã –ø–æ–∫–æ—Ä–º–∏–ª–∏ –≤–∞—à–µ–≥–æ –ø–æ–∫–µ–º–æ–Ω–∞ —è–±–ª–æ–∫–æ–º!")

    elif call.data == "banana":
        bot.answer_callback_query(call.id)
        bot.send_message(call.message.chat.id, f"üçå –í—ã –ø–æ–∫–æ—Ä–º–∏–ª–∏ –≤–∞—à–µ–≥–æ –ø–æ–∫–µ–º–æ–Ω–∞ –±–∞–Ω–∞–Ω–æ–º!")

@bot.message_handler(commands=['go'])
def go(message):
    if message.from_user.username not in Pokemon.pokemons.keys():
        pokemon = Pokemon(message.from_user.username)
        bot.reply_to(message, pokemon.info())
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ç–æ –ø–æ URL
        bot.send_photo(message.chat.id, pokemon.img)
    else:
        bot.reply_to(message, "–¢—ã —É–∂–µ —Å–æ–∑–¥–∞–ª —Å–µ–±–µ –ø–æ–∫–µ–º–æ–Ω–∞")


# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤ infinity_polling
bot.infinity_polling()